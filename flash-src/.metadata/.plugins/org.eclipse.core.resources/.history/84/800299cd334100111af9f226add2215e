package com.dozeo.pusheras.channel
{
	import com.dozeo.pusheras.Pusher;
	import com.dozeo.pusheras.events.PusherEvent;
	
	import flash.events.EventDispatcher;

	public class PusherChannel extends EventDispatcher
	{
		// constants
		static public const CLIENT_EVENT_NAME_PREFIX:String = "client-";
		
		private var _name:String;
		private var _pusherEventDispatcherCallback:Function;
		
		public function PusherChannel(name:String, pusherEventDispatcherCallback:Function)
		{
			// copy vars
			this._name = name;
			this._pusherEventDispatcherCallback = pusherEventDispatcherCallback;
		}
		
		public function dispatchPusherEvent(event:PusherEvent):void
		{
			if(_pusherEventDispatcherCallback == null)
				return;
			
			event.channel = _name;
			event.event = CLIENT_EVENT_NAME_PREFIX + event.event;
			
			_pusherEventDispatcherCallback(event);
		}

		public function get name():String
		{
			return _name;
		}

		public function set name(value:String):void
		{
			_name = value;
		}

		public function get pusherEventDispatcherCallback():Function
		{
			return _pusherEventDispatcherCallback;
		}

		public function set pusherEventDispatcherCallback(value:Function):void
		{
			_pusherEventDispatcherCallback = value;
		}


	}
}